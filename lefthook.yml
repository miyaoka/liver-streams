glob_matcher: doublestar

output:
  - execution_out

pre-commit:
  parallel: true
  jobs:
    # Formatter（ts/vue 以外。ts/vue は各 linter ジョブで oxfmt を実行）
    - name: oxfmt
      glob: "**/*.{css,scss,md}"
      run: pnpm exec oxfmt --write {staged_files}
      stage_fixed: true

    # Linter + Formatter
    - name: oxlint-root
      glob: "*.ts"
      exclude:
        - "packages/**"
        - "services/**"
      run: pnpm exec oxlint --type-aware --fix {staged_files} && pnpm exec oxfmt --write {staged_files}
      stage_fixed: true
    - name: oxlint-core
      root: "packages/core/"
      glob: "**/*.ts"
      run: pnpm exec oxlint --type-aware --fix {staged_files} && pnpm exec oxfmt --write {staged_files}
      stage_fixed: true
    - name: oxlint-services-hololive
      root: "services/hololive/"
      glob: "**/*.ts"
      run: pnpm exec oxlint --type-aware --fix {staged_files} && pnpm exec oxfmt --write {staged_files}
      stage_fixed: true
    - name: oxlint-services-nijisanji
      root: "services/nijisanji/"
      glob: "**/*.ts"
      run: pnpm exec oxlint --type-aware --fix {staged_files} && pnpm exec oxfmt --write {staged_files}
      stage_fixed: true
    - name: eslint-ui
      root: "packages/ui/"
      glob: "**/*.{ts,vue}"
      run: pnpm exec eslint --cache --fix -c eslint.config.fix.ts {staged_files} && pnpm exec oxfmt --write {staged_files}
      stage_fixed: true
